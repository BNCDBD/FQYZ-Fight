# Luogu U563029 FQYZ杀

## 题目背景

一天，有人把一种很 **_新_** （？）的游戏带到了FQYZ 709……

## 题目描述

这个游戏有 $n$ 个玩家进行，每个玩家有一个能量值，初始能量值为 $3$ （之后每回合开始时增加 $1$ ）。
### 身份

学校阵营：

- 德育处副主任/`XFM`
- 段长/`LB`
- 班主任/`LYW`
- 英语老师/`HXQ`

学生阵营：

- 小W/`WJY`
- 小C/`CHY`
- 小N/`NJH`
- 小L/`LHX`

### 身份介绍
**_德育处副主任/`XFM`_**：  
HP上限： $260$   
额外计数器：  
1. 怒气值 $E$ ，初始为 $0$ ，当 $E \gt 0$ 时每回合减 $1$ 。
2. 可复活一次，且回血 $180$ 。

**普通形态**  
普通攻击：选择一个敌方单位造成 $10$ 点伤害。  
技能1：大喊“你要造反吗？”，单体伤害，使敌方单位扣除 $15$ 点HP。（耗能 $1$ ）  
技能2：将右手举过头顶，向右横扫 $3$ 次，单体伤害，每次对敌方单位造成 $5\%$ 的百分比伤害，当敌方单位HP低于 $20\%$ 时，直接斩杀。（耗能 $3$ ）  
大招：对敌方阵营大喊一声“处”，使敌方所有单位眩晕一回合（一回合无法行动），并对敌方造成持续型伤害（每回合造成 $10\%$ 的百分比伤害），持续 $3$ 回合。（耗能 $5$ ）  
**被动技能**：当 $E \ge 20$ 时，进入**红温形态**。

**红温形态**  
普通攻击：选择一个敌方单位造成 $5\%$ 的百分比伤害。  
技能1：选择一个敌方单位施行“写检讨”，造成每回合扣除 $5$ 点HP，且此单位无法造成实质性伤害。“检讨”有 $20$ 点HP（**检讨可叠加**），此单位所有攻击转移到“检讨”上。“检讨”的HP $\le 0$ 时解除“写检讨”状态。（耗能 $2$ ）  
技能2：选择一个敌方单位并将其关入办公室，使其**无法行动** $2$ 回合，每回合造成 $10 \%$ 的百分比伤害。（耗能 $4$）  
大招：“上课最忌讳的事情就是……”对敌方所有单位造成 $20 \%$ 的百分比伤害，并中毒（每回合扣除 $10$ HP） $3$ 回合。同时为所有己方单位回血 $20 \%$ 。（耗能 $6$ ）~~太权威了~~  
**被动技能**：当 $E=0$ 时，回到**普通形态**。

**_段长/`LB`_**：  
HP上限： $300$ 

普通攻击：对敌方一单位造成 $10$ 点伤害。  
技能1：饮用冰红茶。使己方一个单位回血 $3 \%$ 。（耗能 $2$ ）  
技能2：狮吼功。对敌方一个单位造成 $15$ 点伤害。（耗能 $3$ ）  
技能3：肉盾。使一个己方单位附加 $30$ 点的护盾。（耗能 $5$ ）  
技能4：通报批评。对敌方所有单位造成 $10 \%$ 的百分比伤害。（耗能 $7$ ）  
大招：对敌方一个单位“处分”，进行判定：  
1. 当此单位HP $\le 20\%$ 时，直接斩杀。
2.  $20\% \lt$ 当此单位HP $\le 40\%$ 时，将其HP设置为HP上限的 $10 \%$ 。
3.  $40\% \lt$ 当此单位HP $\le 60\%$ 时，将其HP设置为HP上限的 $30 \%$ 。
4.  $60\% \lt$ 当此单位HP $\le 100\%$ 时，将其HP设置为HP上限的 $60 \%$ 。  
（耗能 $10$ ）

**_班主任/`LYW`_**：  
HP上限： $100$ 

普通攻击：使敌方一个单位损失 $1$ 点HP。~~太蒻了~~  
技能1：深蹲。让敌方一单位进行“深蹲”，每回合扣除 $5$ 点HP，持续 $5$ 回合。（耗能 $3$ ）  
技能2：不懂装懂。考察对方一单位英语背诵，进行判定：  
1. 当此单位HP $\le 40\%$ 时，扣除其 $10$ 点HP。
2.  $40\% \lt$ 当此单位HP $\le 50\%$ 时，扣除其 $20$ 点HP。
3. 当此单位HP $\gt 50\%$ 时，扣除`LYW` $20\%$ 的HP。  
（耗能 $5$ ）

大招：监控叫人。对敌方一单位造成 $5 \%$ 的百分比伤害，并眩晕 $1$ 回合。（耗能 $7$ ）

**_英语老师/`HXQ`_**：  
HP上限： $250$   
额外计数器：
1. 怒气值 $E$ ，初始为 $0$ ，当 $E \gt 0$ 时每回合减 $2$ 。

普通攻击：对敌方一单位造成 $15$ 点伤害。（当 $E \ge 10$ 时为 $20$ 点）  
技能1：罚抄。对敌方一单位进行“罚抄”，每回合扣除 $15$ 点HP，持续 $3$ 回合。（耗能 $2$ ）  
技能2：鞭策。对敌方所有单位进行“鞭策”，造成 $20$ 点伤害，并附加每回合受到 $10 \%$ 百分比伤害的效果 $2$ 回合。（耗能 $4$ ）  
大招：对所有敌方单位大吼一声，造成 $50$ 点伤害，并中毒 $3$ 回合，每回合受到 $10 \%$ 的百分比伤害，持续 $2$ 回合。（耗能 $8$ ）

**_小W/`WJY`_**：  
HP上限：$230$

普通攻击：选择一个敌方单位，造成 $10$ 点伤害。  
技能1：犯困。对敌方一个单位造成 $10$ 点伤害。如果此单位为 `XFM` ，将其 $E$ 增加 $3$ 。（耗能 $3$ ）  
技能2：睡觉。选择己方一单位并将HP增加 $10\%$ ，选择敌方一单位造成 $20$ 点伤害。（如果此敌方单位为 `XFM` ，则 $E$ 增加 $5$ 且伤害翻倍）（耗能 $5$ ）  
大招：我不是药神。选择一己方单位并将HP增加 $20\%$ ，同时对所有己方单位加 $20$ 点HP并清除负面效果。（耗能 $7$ ）  
**被动技能**：当自己血量低于 $10\%$ 时直接趋势并让所有己方单位回血 $30 \%$ 。

**_小C/`CHY`_**：  
HP上限： $200$ 

**正常形态**  
普通攻击：选择一个敌方单位造成 $10$ 点伤害。  
技能1：对一个敌方单位进行“偷窃”。使其扣除 $3$ 点能量并加到自己的能量上。（如果目标能量小于 $3$ ，则全偷）（耗能 $3$ ）  
技能2：“阴阳”一个敌方单位。造成 $15$ 点伤害，并附加“中毒”效果 $2$ 回合。（每回合扣除 $10$ 点HP）（耗能 $4$ ）  
大招：对一个敌方单位进行“抄作业”。使其每回合受到 $10 \%$ 的百分比伤害，并把扣除的HP增加到自己的HP上（如果对方HP不够，能吸多少是多少，但是 `CHY` 阵亡后不再吸血），持续 $3$ 回合。（**注：如果对方是 `XFM` ，每回合受伤时 $E$ 增加 $5$**）（耗能 $6$ ）  
**切换技能**：切换成**LD形态**。（耗能 $0$ ，CD $3$ 回合）

**LD形态**  
~~不要问什么是LD~~  
普通攻击：对一个敌方单位造成 $5$ 点伤害。  
技能1：“肘击”一个敌方单位。造成 $20$ 点伤害。（耗能 $4$ ）  
技能2：“撞击”。对所有敌方单位造成 $10 \%$ 的百分比伤害。（对 `HXQ` 只有 $5 \%$ 且把其 $E$ 增加 $5$ ）（耗能 $5$ ）  
大招：“神金”。对所有敌方单位造成 $50 \%$ 的百分比伤害（如果是 `HXQ` 则将其 $E$ 增加 $7$ ），但是**要让所有己方单位受到 $30 \%$ 的百分比伤害**。（耗能 $7$ ）  
**切换技能**：切换成**正常形态**。（耗能 $0$ ，CD $3$ 回合）

**_小?/`???`_**：  

***To Be Continued....***

**_小?/`???`_**：  

***To Be Continued....***

**注**：眩晕无法使用被动技能。

### 行动方式

对于每个玩家：

选择技能：

- 当 $V \gt 10$ 时，使用大招。
- 否则，使用 `Rand` 函数（下面提供实现）随机一个当前状态（如果有的话）的技能：

  1. 如果这个技能的耗能量小于等于当前的 $V$ ，直接使用。
  2. 否则，一直用 `Rand` 函数随机技能直到满足条件1。

选择单位：  
这边贴出实现逻辑。~~有点奇怪~~
```
int rand_otherteam(int self,int myteam){//选择敌方单位
	int dst;//目标
	do{
		dst=Rand()%n+1;//随机一个编号
	}while(这个玩家已经阵亡了||选到了己方单位);
	return dst;
}
int rand_myteam(int self,int myteam){//选择己方单位
	int dst;//目标
	do{
		dst=Rand()%n+1;//随机一个编号
	}while(这个玩家已经阵亡了||选到了敌方单位);
	return dst;
}
```
 `Rand` 函数具体实现：（C++）
 ```cpp
unsigned int AAA,BBB,PPP,XXX;
void setseed(unsigned int a,unsigned int b,unsigned int p){//用于设置随机种子
	AAA=a,BBB=b,PPP=p;
}
unsigned int Rand(){//获取一个随机数
	return XXX=(AAA*XXX+BBB)%PPP;
}
```


你需要根据每个玩家的身份，判断哪个阵营获胜。  
**本题提供演示程序**（见附件，仅支持 windows 系统）
~~这是一个被 Windows 认为是重大威胁的程序~~

***注：不会那么无聊给你塞一个病毒！***

## 输入格式

第一行，四个整数 $n$ 和 $A$，$B$，$P$ 。其中 $A$，$B$，$P$ 为 `setseed` 函数中需要用到的三个参数。  
接下来 $n$ 行，第 $i$ 行一个字符串，表示第 $i$ 个玩家的身份。


**附：如何使用随机参数：**  
 `setseed(A,B,P)` 可以设置 `Rand` 函数的种子。  
每次调用 `Rand` 函数都会返回一个随机数。

## 输出格式

一行，一个字符串。当学校阵营获胜时输出 `School win!` ，当学生阵营获胜时输出 `Students win!` ，当平局时（也就是存在一个回合，其最后所有玩家都阵亡），输出 `Draw!` 。

## 说明/提示

**本题采用捆绑测试**

- Subtask 0（0 \%）：样例，不计分。
- Subtask 1（10 \%）：保证数据中只有 `LB` 和 `WJY` 这两种身份。
- Subtask 2（30 \%）：保证数据中没有 `XFM` 和 `CHY` 这两种身份。
- Subtask 3（60 \%）：无特殊限制。

对于所有测试数据，都有 $n \le 2500$ ， $1 \le A,B,P \le 3 \times 10^6$ 。

~~懂的都懂，不懂的都不懂~~
